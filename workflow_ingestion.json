{
  "name": "Case 39A - Ingest√£o de Dados",
  "nodes": [
    {
      "parameters": {},
      "id": "fed290b7-16e8-4098-bdb0-a94b7779599f",
      "name": "Unzip",
      "type": "n8n-nodes-base.compression",
      "typeVersion": 1,
      "position": [
        -400,
        160
      ]
    },
    {
      "parameters": {
        "binaryPropertyName": "file_0",
        "options": {
          "rawData": true
        }
      },
      "id": "572cc171-111c-4591-ab16-a3ff047ff8a9",
      "name": "Parse Clientes",
      "type": "n8n-nodes-base.spreadsheetFile",
      "typeVersion": 1,
      "position": [
        0,
        0
      ]
    },
    {
      "parameters": {
        "binaryPropertyName": "file_1",
        "options": {
          "rawData": true
        }
      },
      "id": "6aa3980d-5af3-44cf-a496-c4a4a8e77fb8",
      "name": "Parse Contratos",
      "type": "n8n-nodes-base.spreadsheetFile",
      "typeVersion": 1,
      "position": [
        0,
        160
      ]
    },
    {
      "parameters": {
        "binaryPropertyName": "file_2",
        "options": {
          "rawData": true
        }
      },
      "id": "5dd5ebce-fe31-4f68-8aac-61b92cb74191",
      "name": "Parse Leituras",
      "type": "n8n-nodes-base.spreadsheetFile",
      "typeVersion": 1,
      "position": [
        0,
        304
      ]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "upload-zip",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -800,
        160
      ],
      "id": "909e2001-1adb-4c3e-90cb-50c2a38efa73",
      "name": "Webhook",
      "webhookId": "958d6b8f-0171-4d36-8241-900088ceb234"
    },
    {
      "parameters": {
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list",
          "cachedResultName": "public"
        },
        "table": {
          "__rl": true,
          "value": "clientes",
          "mode": "list",
          "cachedResultName": "clientes"
        },
        "columns": {
          "mappingMode": "autoMapInputData",
          "value": {
            "id": 0
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nome",
              "displayName": "nome",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "skipOnConflict": true
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        208,
        0
      ],
      "id": "01c0b1ae-85bc-40b9-93c5-b8ed45d934e1",
      "name": "Insert rows in a table",
      "credentials": {
        "postgres": {
          "id": "7UawrySeNkZcMXeW",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "contratos",
          "mode": "list",
          "cachedResultName": "contratos"
        },
        "columns": {
          "mappingMode": "autoMapInputData",
          "value": {
            "ativo": false,
            "id": 0,
            "cliente_id": 0
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "cliente_id",
              "displayName": "cliente_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true
            },
            {
              "id": "data_inicio",
              "displayName": "data_inicio",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true
            },
            {
              "id": "ativo",
              "displayName": "ativo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "boolean",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "skipOnConflict": true
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        208,
        160
      ],
      "id": "04f3f4ca-028a-4658-ac8a-a9587841f7cc",
      "name": "Insert rows in a table1",
      "credentials": {
        "postgres": {
          "id": "7UawrySeNkZcMXeW",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "leituras",
          "mode": "list",
          "cachedResultName": "leituras"
        },
        "columns": {
          "mappingMode": "autoMapInputData",
          "value": {
            "id": 0,
            "contrato_id": 0,
            "valor_kwh": 0
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "contrato_id",
              "displayName": "contrato_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true
            },
            {
              "id": "data_leitura",
              "displayName": "data_leitura",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true
            },
            {
              "id": "valor_kwh",
              "displayName": "valor_kwh",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "skipOnConflict": true
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        208,
        304
      ],
      "id": "29df20df-fccb-4cfb-96c5-35d7e9203f3d",
      "name": "Insert rows in a table2",
      "credentials": {
        "postgres": {
          "id": "7UawrySeNkZcMXeW",
          "name": "Postgres account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Unzip": {
      "main": [
        [
          {
            "node": "Parse Clientes",
            "type": "main",
            "index": 0
          },
          {
            "node": "Parse Contratos",
            "type": "main",
            "index": 0
          },
          {
            "node": "Parse Leituras",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Clientes": {
      "main": [
        [
          {
            "node": "Insert rows in a table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Contratos": {
      "main": [
        [
          {
            "node": "Insert rows in a table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Leituras": {
      "main": [
        [
          {
            "node": "Insert rows in a table2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Unzip",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table": {
      "main": [
        []
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "aa81487c-da98-49aa-9f10-1be120a6a2a3",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "809b170c5753efa82ef4fbdd7f69eb25703413a2e3085f1835ef4706e6434381"
  },
  "id": "rjnBIgYfBfAxvz_gy_WnQ",
  "tags": []
}